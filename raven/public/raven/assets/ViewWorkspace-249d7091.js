var L=Object.defineProperty,$=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var y=(a,s,r)=>s in a?L(a,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[s]=r,m=(a,s)=>{for(var r in s||(s={}))E.call(s,r)&&y(a,r,s[r]);if(k)for(var r of k(s))M.call(s,r)&&y(a,r,s[r]);return a},u=(a,s)=>$(a,O(s));import{aN as I,bb as T,r as U,j as e,a as p,p as j,a0 as R,a1 as V,a2 as A,a3 as D,a4 as B,q as P,a5 as H,a6 as q,a7 as z,a8 as Z,a9 as G,aa as Q,ab as Y,V as J,bc as K,at as X,Y as ee,o as v,Z as se,af as ae,S as h,L as w,bd as re,d as ne,aT as _,be as oe,i as b,bf as C,_ as g,aM as le,aW as te,bg as ie,bh as ce,E as F,F as de,ad as me,u as he,aZ as xe,ae as pe,e as je,bi as ue,bj as be,bk as N,bl as ge,bm as ve,bn as S,$ as fe}from"./index-81db420b.js";import{U as ke}from"./UploadImageModal-375ec61c.js";import{W as ye}from"./WorkspaceMemberManagement-60867905.js";import{P as we,S as _e,a as Ce}from"./SettingsContentContainer-c8f50a15.js";import{a as Ne}from"./validations-18aa1769.js";import"./index-a6c096df.js";import"./TableLoader-47d8c4ae.js";import"./Skeleton-9de30e70.js";import"./useGetUserRecords-beb6efeb.js";const Se=()=>{const{control:a,watch:s}=I(),r=s("name"),{field:{value:n,onChange:o}}=T({control:a,name:"logo"}),[l,t]=U.useState(!1),d=()=>{o("")},i=c=>{c&&o(c),t(!1)};return e.jsx(p,{direction:"column",gap:"3",children:e.jsxs(j,{className:"relative",children:[n?e.jsx("img",{src:n,alt:"Workspace Logo",className:"object-cover h-32 w-32 rounded-xl"}):e.jsx(R,{alt:r,size:"9",fallback:V(r),className:"h-44 w-44"}),e.jsx(We,{open:l,setOpen:t,uploadImage:i,workspaceID:r}),n&&e.jsx(Ie,{onDelete:d})]})})},We=({open:a,setOpen:s,uploadImage:r,workspaceID:n})=>e.jsxs(A,{open:a,onOpenChange:s,children:[e.jsx(D,{content:"Upload Image",side:"right",children:e.jsx(B,{children:e.jsx(P,{type:"button","aria-label":"upload image",size:"1",className:"absolute -right-2 -bottom-1 rounded-md shadow-md",children:e.jsx(H,{size:"12"})})})}),e.jsx(q,{className:z,children:e.jsx(ke,{uploadImage:r,doctype:"Raven Workspace",docname:n,fieldname:"logo"})})]}),Ie=({onDelete:a})=>e.jsxs(Z,{children:[e.jsx(D,{content:"Remove Image",side:"right",children:e.jsx(G,{children:e.jsx(P,{type:"button","aria-label":"remove image",size:"1",className:"absolute -right-2 bottom-6 rounded-md bg-white dark:bg-slate-4 shadow-md",children:e.jsx(Q,{size:"12",color:"tomato"})})})}),e.jsxs(Y,{className:z,maxWidth:"450px",children:[e.jsx(J,{children:"Remove logo"}),e.jsx(K,{size:"2",children:"Are you sure you want to remove the logo?"}),e.jsxs(X,{gap:"2",justify:"end",mt:"4",children:[e.jsx(ee,{children:e.jsx(v,{variant:"soft",color:"gray",children:"Cancel"})}),e.jsx(se,{children:e.jsx(v,{variant:"solid",color:"red",onClick:a,children:"Delete"})})]})]})]}),De=()=>{var n;const{register:a,formState:{errors:s},control:r}=I();return e.jsx(ae,{className:"p-0 align-middle justify-center",children:e.jsxs(h,{children:[e.jsx(j,{className:"flex justify-center w-full items-center bg-slate-2 dark:bg-slate-3 py-6",children:e.jsx(Se,{})}),e.jsxs(h,{width:"100%",px:"4",pb:"4",gap:"4",children:[e.jsxs(h,{className:"max-w-lg",children:[e.jsxs(j,{children:[e.jsx(w,{htmlFor:"description",children:"Description"}),e.jsx(re,u(m({id:"description"},a("description")),{rows:2,resize:"vertical",placeholder:"What is this workspace for?","aria-invalid":s.description?"true":"false"}))]}),s.description&&e.jsx(ne,{children:(n=s.description)==null?void 0:n.message})]}),e.jsxs(h,{className:"max-w-lg",children:[e.jsx(w,{htmlFor:"channel_type",children:"Workspace Type"}),e.jsx(_,{name:"type",control:r,render:({field:o})=>e.jsx(oe,{defaultValue:"1",variant:"soft",id:"channel_type",value:o.value,onValueChange:o.onChange,children:e.jsxs(p,{gap:"4",children:[e.jsx(b,{as:"label",size:"2",children:e.jsxs(p,{gap:"2",children:[e.jsx(C,{value:"Public"})," ",g("Public")]})}),e.jsx(b,{as:"label",size:"2",children:e.jsxs(p,{gap:"2",children:[e.jsx(C,{value:"Private"})," ",g("Private")]})})]})})}),e.jsx(le,{children:g(`When a workspace is set to private, it can only be viewed or joined by invitation.
When a workspace is set to public, anyone can join the workspace and view it's channels.`)})]}),e.jsx(h,{className:"max-w-lg",children:e.jsxs(b,{as:"label",size:"2",children:[e.jsx(_,{control:r,name:"only_admins_can_create_channels",render:({field:{value:o,onChange:l,onBlur:t,name:d,disabled:i,ref:c}})=>e.jsx(te,{checked:!!o,disabled:i,name:d,"aria-invalid":s.only_admins_can_create_channels?"true":"false","aria-describedby":s.only_admins_can_create_channels?"only-admins-can-create-channels-error":void 0,"aria-required":s.only_admins_can_create_channels?"true":"false",onBlur:t,ref:c,onCheckedChange:x=>l(x?1:0)})}),"Â  Only admins can create channels in this workspace?"]})})]})]})})},W={size:18,className:"mr-1.5"},Pe=()=>{const{ID:a}=ie(),{data:s,isLoading:r,error:n,mutate:o}=ce("Raven Workspace",a);return e.jsxs(we,{children:[e.jsx(F,{error:n}),r&&e.jsx(de,{className:"h-64"}),s&&e.jsx(ze,{data:s,mutate:o})]})},ze=({data:a,mutate:s})=>{const{updateDoc:r,loading:n,error:o}=me(),l=he({defaultValues:a}),{formState:{dirtyFields:t}}=l,d=!Ne(t),{mutate:i}=xe(),c=x=>{r("Raven Workspace",x.name,x).then(f=>{fe.success("Saved"),l.reset(f),i("workspaces_list"),i("channel_list"),s(f,{revalidate:!1})})};return e.jsx("form",{onSubmit:l.handleSubmit(c),children:e.jsx(pe,u(m({},l),{children:e.jsxs(_e,{children:[e.jsx(Ce,{title:a.workspace_name,headerBadges:d?[{label:"Not Saved",color:"red"}]:void 0,actions:e.jsxs(v,{type:"submit",disabled:n,children:[n&&e.jsx(je,{className:"text-white"}),n?"Saving":"Save"]}),breadcrumbs:[{label:"Workspaces",href:"../"},{label:a.workspace_name,href:"",copyToClipboard:!0}]}),e.jsx(F,{error:o}),a&&e.jsxs(ue,{defaultValue:"details",children:[e.jsxs(be,{children:[e.jsxs(N,{value:"details",children:[e.jsx(ge,m({},W))," Details"]}),e.jsxs(N,{value:"members",children:[e.jsx(ve,m({},W))," Members"]})]}),e.jsxs(j,{pt:"4",children:[e.jsx(S,{value:"details",children:e.jsx(De,{})}),e.jsx(S,{value:"members",children:e.jsx(ye,{workspaceID:a.name})})]})]})]})}))})},Ae=Pe;export{Ae as Component};
