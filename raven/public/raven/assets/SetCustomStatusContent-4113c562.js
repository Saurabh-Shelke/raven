var y=Object.defineProperty,C=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var j=(a,t,e)=>t in a?y(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,l=(a,t)=>{for(var e in t||(t={}))L.call(t,e)&&j(a,e,t[e]);if(x)for(var e of x(t))k.call(t,e)&&j(a,e,t[e]);return a},m=(a,t)=>C(a,F(t));import{aD as w,T as O,u as $,c as D,r as N,j as s,aq as P,_ as r,ae as U,E as V,a as c,L as q,b as z,m as B,q as R,ao as T,d as A,au as G,o as g,e as H,$ as I}from"./index-81db420b.js";import J from"./EmojiPicker-289a24eb.js";import"./AddCustomEmojiDialog-15ed8490.js";const X=({onClose:a})=>{var h;w();const{myProfile:t,mutate:e}=O(),o=$({defaultValues:{custom_status:(h=t==null?void 0:t.custom_status)!=null?h:""}}),{register:p,handleSubmit:_,formState:{errors:n}}=o,{call:S,loading:u,error:f}=D("raven.api.raven_users.update_raven_user"),v=i=>{S({custom_status:i.custom_status}).then(()=>{I.success(r("User status updated")),e(),a()})},b=i=>{o.setValue("custom_status",`${o.getValues("custom_status")} ${i}`)},[d,E]=N.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx(P,{children:r("Set a custom status")}),s.jsx(U,m(l({},o),{children:s.jsxs("form",{onSubmit:_(v),children:[s.jsx(V,{error:f}),s.jsxs(c,{direction:"column",gap:"2",children:[s.jsx(q,{size:"2",color:"gray",weight:"regular",htmlFor:"custom_status",children:r("Share what you're up to")}),s.jsx(c,{align:"center",gap:"3",children:s.jsxs(c,{direction:"column",gap:"1",children:[s.jsx(z,m(l({id:"custom_status",autoFocus:!0,placeholder:"e.g. Out of Office",maxLength:140},p("custom_status",{maxLength:{value:140,message:r("Status cannot be more than {0} characters.",140)}})),{className:"min-w-[21rem]","aria-invalid":n.custom_status?"true":"false",children:s.jsx(B,{side:"right",children:s.jsx(R,{type:"button",className:"rounded-full",onClick:()=>E(!d),variant:"ghost",color:"gray",children:s.jsx(T,{size:"18"})})})})),n.custom_status&&s.jsx(A,{children:n.custom_status.message})]})}),d&&s.jsx(J,{onSelect:b})]}),s.jsxs(c,{gap:"3",mt:"6",justify:"end",align:"center",children:[s.jsx(G,{disabled:u,children:s.jsx(g,{variant:"soft",color:"gray",children:r("Cancel")})}),s.jsxs(g,{type:"submit",disabled:u,children:[u&&s.jsx(H,{className:"text-white"}),u?r("Saving"):r("Save")]})]})]})}))]})};export{X as default};
