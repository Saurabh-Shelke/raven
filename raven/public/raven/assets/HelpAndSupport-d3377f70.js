var $=Object.defineProperty,E=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var q=(a,s,t)=>s in a?$(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,y=(a,s)=>{for(var t in s||(s={}))M.call(s,t)&&q(a,t,s[t]);if(T)for(var t of T(s))I.call(s,t)&&q(a,t,s[t]);return a},b=(a,s)=>E(a,P(s));import{j as e,a2 as O,a6 as D,K as F,a7 as V,aD as B,u as W,c as Q,aq as G,ar as Y,S as d,aT as Z,aE as U,aF as f,a as r,cM as J,i,cN as K,cO as X,d as k,p as _,L as H,b as ee,bd as se,at as ae,au as te,o as w,e as ie,f as l,$ as ne,r as h,n as re,cP as oe,x as le,l as ce,aC as N,q as de,cQ as ue,cR as he,b8 as pe,cS as me,J as R,bC as v,bG as xe}from"./index-81db420b.js";import{P as ge,S as je,a as ye}from"./SettingsContentContainer-c8f50a15.js";const p={Feedback:{heading:"Send feedback",subHeading:"How can we improve Linear? If you have a feature request, can you also share how you would use it and why it's important to you?",defaultTextAreaValue:"What if...",footerHeading:e.jsxs("span",{children:["You can also email us at ",e.jsx(l,{href:"mailto:support@thecommit.company",underline:"none",size:"1",target:"_blank",children:"support@thecommit.company"})," We can't respond to every request but we read all of them."]})},Question:{heading:"Ask a question",subHeading:"How can we help? Please share any relevant information we may need to answer your question.",defaultTextAreaValue:"How do I...",footerHeading:e.jsxs("span",{children:["You can also email us at ",e.jsx(l,{href:"mailto:support@thecommit.company",underline:"none",size:"1",target:"_blank",children:"support@thecommit.company"})]})},Bug:{heading:"Contact us",subHeading:"What is the issue? If you're reporting a bug, what are the steps you took so we can reproduce the behaviour?",defaultTextAreaValue:"Something seems wrong...",footerHeading:e.jsxs("span",{children:["You can also email us at ",e.jsx(l,{href:"mailto:support@thecommit.company",underline:"none",size:"1",target:"_blank",children:"support@thecommit.company"})]})}},be=({open:a,onClose:s})=>e.jsx(O,{open:a,onOpenChange:s,children:e.jsx(D,{maxWidth:"700px",className:F(V),children:e.jsx(ke,{onClose:s})})}),fe=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,ke=({onClose:a})=>{var C,S;const{name:s}=B(),{control:t,register:u,formState:{errors:n},handleSubmit:m,watch:x}=W({defaultValues:{ticket_type:"Feedback",email:fe.test(s!=null?s:"")?s:""}}),c=x("ticket_type"),{call:g,error:z,loading:j}=Q("raven.api.support_request.submit_support_request"),A=o=>{g({email:o.email,ticket_type:o.ticket_type,subject:o.description.substring(0,140),description:o.description}).then(()=>{ne.success("Form submitted successfully!"),a()})};return e.jsxs("form",{onSubmit:m(A),children:[e.jsx(G,{children:p[c].heading}),e.jsx(Y,{size:"2",className:"min-h-10 select-none",children:p[c].subHeading}),e.jsxs(d,{gap:"2",pt:"3",children:[e.jsx(Z,{name:"ticket_type",control:t,rules:{required:"Request type is required",validate:o=>Object.keys(p).includes(o)||"Invalid request type"},render:({field:{onChange:o,value:L}})=>e.jsxs(U,{value:L,onValueChange:o,children:[e.jsx(f,{value:"Feedback",children:e.jsx(r,{direction:"column",width:"100%",gap:"1",children:e.jsxs(r,{align:"center",gap:"3",children:[e.jsx(J,{size:"16"}),e.jsx(i,{weight:"bold",children:"Feedback"})]})})}),e.jsx(f,{value:"Question",children:e.jsx(r,{direction:"column",width:"100%",gap:"1",children:e.jsxs(r,{align:"center",gap:"3",children:[e.jsx(K,{size:"16"}),e.jsx(i,{weight:"bold",children:"Question"})]})})}),e.jsx(f,{value:"Bug",children:e.jsx(r,{direction:"column",width:"100%",gap:"1",children:e.jsxs(r,{align:"center",gap:"3",children:[e.jsx(X,{size:"16"}),e.jsx(i,{weight:"bold",children:"Bug"})]})})})]})}),n.ticket_type&&e.jsx(k,{children:n.ticket_type.message}),e.jsxs(d,{children:[e.jsxs(_,{children:[e.jsx(H,{htmlFor:"email",isRequired:!0,children:"Email"}),e.jsx(ee,b(y({id:"email"},u("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})),{type:"email",placeholder:"email@example.com","aria-invalid":n.email?"true":"false"}))]}),n.email&&e.jsx(k,{children:(C=n.email)==null?void 0:C.message})]}),e.jsxs(d,{children:[e.jsxs(_,{children:[e.jsx(H,{htmlFor:"description",isRequired:!0,children:"Description"}),e.jsx(se,b(y({id:"description"},u("description",{required:"Description is required",minLength:{value:10,message:"Description must be at least 10 characters"}})),{rows:5,resize:"vertical",placeholder:p[c].defaultTextAreaValue,"aria-invalid":n.description?"true":"false"}))]}),n.description&&e.jsx(k,{children:(S=n.description)==null?void 0:S.message})]}),e.jsxs(ae,{justify:"between",pt:"4",gap:"9",children:[e.jsx(i,{color:"gray",size:"1",className:"select-none",children:p[c].footerHeading}),e.jsxs(r,{gap:"2",children:[e.jsx(te,{children:e.jsx(w,{color:"gray",variant:"soft",disabled:j&&!z,children:"Cancel"})}),e.jsxs(w,{type:"submit",disabled:j,children:[j&&!z?e.jsx(ie,{className:"text-white"}):null,"Submit"]})]})]})]})]})},ve=()=>{const{socket:a}=h.useContext(re),[s,t]=h.useState(!0),[u,n]=h.useState("Fail"),[m,x]=h.useState("");oe("pong",()=>{n("Pass"),t(!1),x(a==null?void 0:a.io.engine.transport.name)});const c=()=>{t(!0),a==null||a.emit("ping"),setTimeout(()=>{t(!1),x(g=>g||"")},5e3)};return h.useEffect(()=>{setTimeout(c,5e3)},[]),e.jsxs(d,{children:[e.jsx(le,{as:"h3",size:"3",className:"not-cal font-semibold",children:"Realtime Connection Test"}),e.jsx(i,{size:"2",color:"gray",children:"If messages on Raven do not appear in realtime, you can inspect your network connection here."}),!s&&u==="Fail"&&e.jsx(ce,{message:"Realtime connections are not working on your site. Messages won't be refreshed in real-time."}),e.jsxs(r,{gap:"3",align:"center",pt:"2",children:[e.jsx(i,{size:"2",color:"gray",as:"span",children:"Real-time Ping Check:"}),e.jsxs(r,{align:"center",gap:"2",children:[e.jsx(N,{color:s?"gray":u==="Pass"?"green":"red",children:s?"Loading...":u}),!s&&e.jsx(de,{title:"Send a ping","aria-label":"send a ping",color:"gray",size:"1",variant:"ghost",onClick:c,children:e.jsx(ue,{className:F(s?"animate-spin":null),size:12})})]})]}),m&&e.jsxs(r,{gap:"2",align:"center",children:[e.jsx(i,{size:"2",color:"gray",as:"span",children:"SocketIO Transport Mode:"}),e.jsx(N,{color:"orange",children:m})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(l,{underline:"always",size:"2",target:"_blank",title:"System Health Report",href:"/app/system-health-report",children:[e.jsx(he,{size:"16",className:"-mb-0.5 pr-1"}),"View Full System Health Report"]})})]})},we=()=>{const[a,{on:s,off:t}]=pe();return e.jsxs(ge,{children:[e.jsxs(je,{children:[e.jsx(ye,{title:"Help and Support"}),e.jsxs(d,{gap:"5",children:[e.jsxs(d,{children:[e.jsx(i,{color:"gray",size:"2",as:"span",className:"font-medium",children:"Have ideas or ran into an issue?"}),e.jsx("div",{children:e.jsxs(w,{size:"2",onClick:s,variant:"outline",color:"gray",className:"not-cal cursor-pointer",title:"Click here to send us feedback or file an issue","aria-label":"click here to send us feedback or file an issue",children:[e.jsx(me,{}),"  Contact Us"]})})]}),e.jsx(R,{size:"4"}),e.jsx(ve,{}),e.jsx(R,{size:"4"}),e.jsxs("ul",{className:"list-none",children:[e.jsx("li",{children:e.jsxs(l,{color:"gray",underline:"always",size:"2",target:"_blank",title:"https://github.com/The-Commit-Company/raven",href:"https://github.com/The-Commit-Company/raven",children:["GitHub ",e.jsx(v,{size:"12"})]})}),e.jsx("li",{children:e.jsxs(l,{color:"gray",underline:"always",size:"2",target:"_blank",title:"https://community.ravenapp.cloud",href:"https://community.ravenapp.cloud",children:["Community ",e.jsx(v,{size:"12"})]})}),e.jsx("li",{children:e.jsxs(l,{color:"gray",underline:"always",size:"2",target:"_blank",title:"https://ravenchat.ai",href:"https://ravenchat.ai",children:["Website ",e.jsx(v,{size:"12"})]})}),e.jsx("li",{children:e.jsx(l,{underline:"always",size:"2",target:"_blank",color:"gray",title:"support@thecommit.company",href:"mailto:support@thecommit.company",children:"Support Email"})})]}),e.jsxs(d,{gap:"0",children:[e.jsxs(i,{size:"3",color:"gray",children:[e.jsx(i,{size:"5",className:"cal-sans text-gray-12 dark:text-white",children:"raven"})," ",e.jsxs(xe,{size:"2",variant:"ghost",children:["v",frappe==null?void 0:frappe.boot.versions.raven]})]}),e.jsx(i,{size:"2",color:"gray",children:"Crafted by The Commit Company"})]})]})]}),e.jsx(be,{open:a,onClose:t})]})},Te=we;export{Te as Component};
