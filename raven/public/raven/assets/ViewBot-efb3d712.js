var j=Object.defineProperty,f=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var d=(s,e,t)=>e in s?j(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,u=(s,e)=>{for(var t in e||(e={}))y.call(e,t)&&d(s,t,e[t]);if(m)for(var t of m(e))C.call(e,t)&&d(s,t,e[t]);return s},p=(s,e)=>f(s,S(e));import{bg as E,bh as B,j as a,E as h,F as k,ad as F,u as L,r as x,ae as _,at as w,o as b,e as P,n as N,b9 as D,bC as $,$ as R}from"./index-81db420b.js";import{B as V}from"./BotForm-744234b1.js";import{P as H,S as I,a as K}from"./SettingsContentContainer-c8f50a15.js";import{a as O}from"./validations-18aa1769.js";import"./InstructionField-5664444b.js";import"./useRavenSettings-a6b6461e.js";import"./AINotEnabledCallout-6cdcef2f.js";import"./CodeBlock-5fc83e57.js";import"./index-a9edd0f4.js";/* empty css                      */const W=s=>{const{ID:e}=E(),{data:t,isLoading:n,error:i,mutate:r}=B("Raven Bot",e);return a.jsxs(H,{children:[a.jsx(h,{error:i}),n&&a.jsx(k,{className:"h-64"}),t&&a.jsx(A,{data:t,mutate:r})]})},A=({data:s,mutate:e})=>{const{updateDoc:t,loading:n,error:i}=F(),r=L({disabled:n,defaultValues:s}),{formState:{dirtyFields:v}}=r,g=!O(v),l=c=>{t("Raven Bot",c.name,c).then(o=>{R.success("Saved"),r.reset(o),e(o,{revalidate:!1})})};return x.useEffect(()=>{const c=o=>{o.key==="s"&&(o.metaKey||o.ctrlKey)&&(o.preventDefault(),r.handleSubmit(l)())};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[]),a.jsx("form",{onSubmit:r.handleSubmit(l),children:a.jsx(_,p(u({},r),{children:a.jsxs(I,{children:[a.jsx(K,{title:s.bot_name,headerBadges:g?[{label:"Not Saved",color:"red"}]:void 0,actions:a.jsxs(w,{children:[a.jsx(Q,{bot:s}),a.jsxs(b,{type:"submit",disabled:n,children:[n&&a.jsx(P,{className:"text-white"}),n?"Saving":"Save"]})]}),breadcrumbs:[{label:"Agents",href:"../"},{label:s.name,href:"",copyToClipboard:!0}]}),a.jsx(h,{error:i}),a.jsx(V,{isEdit:!0})]})}))})},Q=({bot:s})=>{const{call:e}=x.useContext(N),t=D(),n=localStorage.getItem("ravenLastWorkspace"),i=()=>{e.post("raven.api.raven_channel.create_direct_message_channel",{user_id:s.raven_user}).then(r=>{t(n?`/${n}/${r.message}`:`/channel/${r.message}`)})};return a.jsxs(b,{variant:"surface",color:"gray",type:"button",className:"not-cal",onClick:i,children:["Open Chat",a.jsx($,{})]})},te=W;export{te as Component};
