var h=Object.defineProperty,j=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var m=(s,e,t)=>e in s?h(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,f=(s,e)=>{for(var t in e||(e={}))g.call(e,t)&&m(s,t,e[t]);if(d)for(var t of d(e))A.call(e,t)&&m(s,t,e[t]);return s},l=(s,e)=>j(s,R(e));import{r as a,c3 as C,bE as $,h as D,M as b,bs as w,j as o}from"./index-81db420b.js";import{A as F}from"./AddCustomEmojiDialog-15ed8490.js";function y(s){const e=a.useRef(null),t=a.useRef(null);return t.current&&t.current.update(s),a.useEffect(()=>(t.current=new C(l(f({},s),{ref:e})),()=>{t.current=null}),[]),$.createElement("div",{ref:e})}const M=({onSelect:s,allowCustomEmojis:e=!0})=>{const{appearance:t}=D(),[p,i]=a.useState(!1),v=n=>{n.native?s(n.native,!1):s(n.src,!0,n.id)},u=b(),{data:r,mutate:E}=w("Raven Custom Emoji",{fields:["name","image","keywords"],limit:1e3},e?"custom-emojis":null,{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1}),x=n=>{i(!1),n&&E()},k=a.useMemo(()=>{if(e&&r)return[{id:"Custom",name:"Custom",emojis:r.map(n=>{var c;return{id:n.name,name:n.name,keywords:(c=n.keywords)==null?void 0:c.split(","),skins:[{src:n.image}]}})}]},[r,e]);return o.jsxs(o.Fragment,{children:[o.jsx(y,{maxFrequentRows:2,set:"apple",custom:k,onEmojiSelect:v,onAddCustomEmoji:e?()=>i(!0):void 0,skinTonePosition:"search",theme:t==="inherit"?"auto":t,autoFocus:u,showPreview:u}),o.jsx(F,{open:p,onClose:x})]})};export{M as default};
