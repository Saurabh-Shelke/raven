import{c as p,aZ as u,j as e,ak as h,b3 as b,$ as g,ac as v,g as k,b4 as f,b5 as W,ag as C,ah as y,q as S,b6 as B,aj as L,aS as N,E as A,aw as $,ax as z,az as j,aA as o,ay as T,aB as t,at as l,a0 as m,i as d,aC as c,b7 as w,aU as P,b8 as O,b9 as E,a2 as M,a4 as R,o as I,a6 as J,a7 as q,aq as D,ar as F,S as H,ba as U}from"./index-81db420b.js";import{T as V}from"./TableLoader-47d8c4ae.js";import{P as Y,S as G,a as Z}from"./SettingsContentContainer-c8f50a15.js";import"./Skeleton-9de30e70.js";const K=({workspace:a})=>{const{call:s}=p("raven.api.workspaces.leave_workspace"),{mutate:n}=u(),r=()=>{g.promise(s({workspace:a.name}).then(()=>{n("workspaces_list"),n("channel_list")}),{loading:"Leaving workspace...",success:"You have left the workspace.",error:i=>`There was an error while leaving the workspace.
${v(i)}`})};return e.jsxs(h,{onClick:r,color:"red",children:[e.jsx(b,{fontSize:16}),"Leave"]})},Q=a=>e.jsx(h,{asChild:!0,children:e.jsxs(k,{to:`${a.workspace.name}`,children:[e.jsx(f,{fontSize:16}),"Manage"]})}),X=({workspace:a})=>{const{call:s}=p("raven.api.workspaces.join_workspace"),{mutate:n}=u(),r=()=>{g.promise(s({workspace:a.name}).then(()=>{n("workspaces_list"),n("channel_list")}),{loading:"Joining workspace...",success:"You have joined the workspace.",error:i=>`There was an error while joining the workspace.
${v(i)}`})};return e.jsxs(h,{onClick:r,children:[e.jsx(W,{fontSize:16}),"Join"]})},ee=({workspace:a})=>e.jsx("div",{className:"flex items-center gap-2 justify-center h-full",children:e.jsxs(C,{children:[e.jsx(y,{children:e.jsx(S,{variant:"ghost",color:"gray",size:"3",children:e.jsx(B,{fontSize:16})})}),e.jsxs(L,{className:"min-w-36",children:[a.is_admin?e.jsx(Q,{workspace:a}):null,a.workspace_member_name?e.jsx(K,{workspace:a}):e.jsx(X,{workspace:a})]})]})}),se=()=>{const{data:a,isLoading:s,error:n}=N();return e.jsx(Y,{children:e.jsxs(G,{children:[e.jsx(Z,{title:"Workspaces",description:"Workspaces allow you to organize your channels and teams.",actions:e.jsx(ne,{})}),s&&!n&&e.jsx(V,{columns:4}),e.jsx(A,{error:n}),a&&e.jsx(ae,{workspaces:a.message})]})})},ae=({workspaces:a})=>e.jsxs($,{variant:"surface",className:"rounded-sm",children:[e.jsx(z,{children:e.jsxs(j,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Membership"}),e.jsx(o,{children:"Description"}),e.jsx(o,{})]})}),e.jsx(T,{children:a==null?void 0:a.map(s=>e.jsxs(j,{children:[e.jsx(t,{maxWidth:"150px",children:s.is_admin?e.jsx(k,{to:`${s.name}`,className:"hover:underline underline-offset-4",children:e.jsxs(l,{align:"center",children:[e.jsx(m,{src:s.logo,alt:s.workspace_name}),e.jsx(d,{weight:"medium",children:s.workspace_name})]})}):e.jsxs(l,{align:"center",children:[e.jsx(m,{src:s.logo,alt:s.workspace_name}),e.jsx(d,{weight:"medium",children:s.workspace_name})]})}),e.jsx(t,{children:e.jsxs(c,{color:s.type==="Private"?"purple":"green",children:[e.jsx(w,{type:s.type==="Private"?"Private":"Open"}),s.type]})}),e.jsx(t,{children:e.jsx(l,{children:s.is_admin?e.jsx(c,{color:"orange",children:"Admin"}):s.workspace_member_name?e.jsx(c,{color:"blue",children:"Member"}):e.jsx(c,{color:"gray",children:"Not a member"})})}),e.jsx(t,{maxWidth:"250px",children:e.jsx(d,{className:"line-clamp-1 text-ellipsis",children:s.description})}),e.jsx(t,{children:e.jsx(ee,{workspace:s})})]},s.name))})]}),ne=()=>{const a=P(),[s,{off:n},r]=O(),i=E(),_=x=>{x&&i(`${x}`),n()};return e.jsxs(M,{open:s,onOpenChange:r,children:[e.jsx(R,{children:e.jsx(I,{disabled:!a,children:"Create"})}),e.jsxs(J,{className:q,children:[e.jsx(D,{children:"Create Workspace"}),e.jsx(F,{size:"2",children:"Workspaces allow you to organize your channels and teams."}),e.jsx(H,{children:e.jsx(U,{onClose:_})})]})]})},ce=se;export{ce as Component};
