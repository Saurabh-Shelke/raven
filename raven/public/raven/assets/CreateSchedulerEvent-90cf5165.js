var a=Object.defineProperty,d=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var l=(t,n,r)=>n in t?a(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,f=(t,n)=>{for(var r in n||(n={}))x.call(n,r)&&l(t,r,n[r]);if(h)for(var r of h(n))S.call(n,r)&&l(t,r,n[r]);return t},v=(t,n)=>d(t,b(n));import{b9 as $,u as g,bB as p,r as E,j as o,ae as j,o as _,e as C,E as q,$ as w}from"./index-81db420b.js";import{S as D}from"./SchedulerEventsForm-7ae48337.js";import{P as k,S as M,a as P}from"./SettingsContentContainer-c8f50a15.js";import"./WebhookForm-4cfc7c6d.js";import"./ServerScriptNotEnabledForm-c4f27eef.js";const F=()=>{const t=$(),n=g(),{createDoc:r,error:y,loading:u}=p(),c=e=>{var m;let s="";e.event_frequency==="Every Day"&&(s=`${e.minute} ${e.hour} * * *`),e.event_frequency==="Every Day of the week"&&(s=`${e.minute} ${e.hour} * * ${e.day}`),e.event_frequency==="Date of the month"&&(s=`${e.minute} ${e.hour} ${e.date} * *`),e.event_frequency==="Cron"&&(s=`${e.minute} ${e.hour} ${e.date} ${e.month} ${e.day}`),r("Raven Scheduler Event",{event_name:e.event_name,disabled:0,send_to:e.send_to,channel:(m=e.channel)!=null?m:"",dm:e.dm?e.dm:"",bot:e.bot,event_frequency:e.event_frequency,cron_expression:s,content:e.content}).then(i=>{i&&t(`../${i==null?void 0:i.name}`),w.success("Scheduled Message created")})};return E.useEffect(()=>{const e=s=>{s.key==="s"&&(s.metaKey||s.ctrlKey)&&(s.preventDefault(),n.handleSubmit(c)())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),o.jsx(k,{children:o.jsx("form",{onSubmit:n.handleSubmit(c),children:o.jsx(j,v(f({},n),{children:o.jsxs(M,{children:[o.jsx(P,{title:"Create a Scheduled Message",actions:o.jsxs(_,{type:"submit",disabled:u,children:[u&&o.jsx(C,{className:"text-white"}),u?"Creating":"Create"]}),breadcrumbs:[{label:"Scheduled Message",href:"../"},{label:"New Scheduled Message",href:""}]}),o.jsx(q,{error:y}),o.jsx(D,{})]})}))})})},z=F;export{z as Component};
