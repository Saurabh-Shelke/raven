var f=Object.defineProperty,j=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var u=(s,e,t)=>e in s?f(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,l=(s,e)=>{for(var t in e||(e={}))F.call(e,t)&&u(s,t,e[t]);if(c)for(var t of c(e))S.call(e,t)&&u(s,t,e[t]);return s},p=(s,e)=>j(s,v(e));import{bg as g,bh as y,j as r,E as x,F as E,ad as w,u as C,r as P,ae as L,o as D,e as k,$ as I}from"./index-81db420b.js";import{F as N}from"./FunctionForm-125eabbf.js";import{P as R,S as V,a as A}from"./SettingsContentContainer-c8f50a15.js";import{a as B}from"./validations-18aa1769.js";import"./AINotEnabledCallout-6cdcef2f.js";import"./useRavenSettings-a6b6461e.js";import"./useDoctypeMeta-749cfb81.js";import"./DoctypeVariableDialogForm-2f0c0daa.js";const K=s=>{const{ID:e}=g(),{data:t,isLoading:a,error:m,mutate:n}=y("Raven AI Function",e);return r.jsxs(R,{children:[r.jsx(x,{error:m}),a&&r.jsx(E,{className:"h-64"}),t&&r.jsx(H,{data:t,mutate:n})]})},H=({data:s,mutate:e})=>{const{updateDoc:t,loading:a,error:m}=w(),n=C({disabled:a,defaultValues:s}),{formState:{dirtyFields:b}}=n,h=!B(b),d=i=>{t("Raven AI Function",i.name,i).then(o=>{I.success("Saved"),n.reset(o),e(o,{revalidate:!1})})};return P.useEffect(()=>{const i=o=>{o.key==="s"&&(o.metaKey||o.ctrlKey)&&(o.preventDefault(),n.handleSubmit(d)())};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[]),r.jsx("form",{onSubmit:n.handleSubmit(d),children:r.jsx(L,p(l({},n),{children:r.jsxs(V,{children:[r.jsx(A,{title:s.name,headerBadges:h?[{label:"Not Saved",color:"red"}]:void 0,actions:r.jsxs(D,{type:"submit",disabled:a,children:[a&&r.jsx(k,{className:"text-white"}),a?"Saving":"Save"]}),breadcrumbs:[{label:"Functions",href:"../"},{label:s.name,href:"",copyToClipboard:!0}]}),r.jsx(x,{error:m}),r.jsx(N,{isEdit:!0})]})}))})},U=K;export{U as Component};
