import{b9 as h,r as b,j as e,a,i as c,aC as g,b$ as m,q as l,c0 as p,a8 as j,a9 as x,br as u,ab as y,a7 as C,av as k,bs as v,c1 as w,o as f,g as E,E as S,c2 as W}from"./index-81db420b.js";import{A as L}from"./DeleteAlert-72df79c6.js";import{E as T,a as A,b as N,c as R,d as D}from"./EmptyListViewState-9bbcffec.js";import{T as O}from"./TableLoader-47d8c4ae.js";import{P as $,S as z,a as P}from"./SettingsContentContainer-c8f50a15.js";import"./Skeleton-9de30e70.js";const q=({webhook:s,mutate:t})=>{const i=h(),[o,n]=b.useState(!1),r=()=>{n(!1)};return e.jsx(a,{direction:"column",gap:"2",width:"100%",justify:"between",className:"border border-gray-4 dark:border-gray-6 rounded-radius2 p-3",children:e.jsxs(a,{direction:"row",align:"center",justify:"between",children:[e.jsxs(a,{direction:"column",gap:"1",children:[e.jsxs(a,{direction:"row",gap:"2",children:[e.jsx(c,{size:"2",weight:"bold",children:s.name}),e.jsx(g,{color:s.enabled?"green":"red",children:s.enabled?"Enabled":"Disabled"})]}),e.jsxs(c,{size:"1",style:{fontStyle:"italic",color:"gray"},children:["Created by ",s.owner," on ",e.jsx(m,{date:s.creation})]})]}),e.jsxs(a,{direction:"row",gap:"2",align:"center",children:[e.jsx(l,{variant:"ghost",color:"gray","aria-label":"Click to edit webhook",title:"Edit webhook",onClick:()=>i(`./${s.name}`),style:{"--icon-button-ghost-padding":"0",height:"var(--base-button-height)",width:"var(--base-button-height)"},children:e.jsx(p,{size:"16"})}),e.jsxs(j,{open:o,onOpenChange:n,children:[e.jsx(x,{children:e.jsx(l,{variant:"ghost",color:"red","aria-label":"Click to delete webhook",title:"Delete webhook",onClick:()=>{},style:{"--icon-button-ghost-padding":"0",height:"var(--base-button-height)",width:"var(--base-button-height)"},children:e.jsx(u,{size:"16"})})}),e.jsx(y,{className:C,children:e.jsx(L,{doctype:"Raven Webhook",docname:s.name,onClose:r,onUpdate:t})})]})]})]})})},I=()=>{const s=k(),{data:t,error:i,isLoading:o,mutate:n}=v("Raven Webhook",{fields:["name","request_url","enabled","owner","creation"]},s?void 0:null,{errorRetryCount:2});return w("Raven Webhook",()=>{n()}),e.jsx($,{children:e.jsxs(z,{children:[e.jsx(P,{title:"Webhooks",description:"Fire webhooks on specific events like when a message is sent or channel is created.",actions:e.jsx(f,{asChild:!0,disabled:!s,children:e.jsx(E,{to:"create",children:"Create"})})}),o&&!i&&e.jsx(O,{columns:2}),e.jsx(S,{error:i}),(t==null?void 0:t.length)===0?null:e.jsx(a,{direction:"column",gap:"4",width:"100%",className:"animate-fadein",children:t==null?void 0:t.map((r,d)=>e.jsx(q,{webhook:r,mutate:n},d))}),((t==null?void 0:t.length)===0||!s)&&e.jsxs(T,{children:[e.jsx(A,{children:e.jsx(W,{})}),e.jsx(N,{children:"Webhooks"}),e.jsx(R,{children:"Webhooks allow you to receive HTTP requests whenever a specific event occurs - like when a message is sent or a channel is created."}),s&&e.jsx(D,{to:"create",children:"Create your first webhook"})]})]})})},U=I;export{U as Component};
