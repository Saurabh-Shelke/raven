var P=Object.defineProperty,F=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var f=(s,o,n)=>o in s?P(s,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[o]=n,u=(s,o)=>{for(var n in o||(o={}))O.call(o,n)&&f(s,n,o[n]);if(g)for(var n of g(o))R.call(o,n)&&f(s,n,o[n]);return s},m=(s,o)=>F(s,N(o));var k=(s,o,n)=>new Promise((t,a)=>{var b=r=>{try{c(n.next(r))}catch(i){a(i)}},h=r=>{try{c(n.throw(r))}catch(i){a(i)}},c=r=>r.done?t(r.value):Promise.resolve(r.value).then(b,h);c((n=n.apply(s,o)).next())});import{u as $,ad as V,r as y,j as e,ae as A,at as B,ag as I,ah as T,q as H,b6 as K,aj as U,ak as _,o as x,e as v,E as p,a8 as q,ab as z,a7 as G,V as Q,i as E,a as S,Y,Z,$ as C,bg as J,bh as M,F as X}from"./index-81db420b.js";import{W as ee}from"./WebhookForm-4cfc7c6d.js";import{a as se}from"./validations-18aa1769.js";import{S as ne,a as oe,P as ae}from"./SettingsContentContainer-c8f50a15.js";const re=({data:s,mutate:o})=>{const n=$({defaultValues:m(u({},s),{docstatus:s.docstatus})}),{updateDoc:t,loading:a,reset:b,error:h}=V(),{formState:{dirtyFields:c}}=n,r=!se(c),i=d=>k(void 0,null,function*(){return t("Raven Webhook",d.name,d).then(l=>{C.success("Webhook updated"),b(),o(),l&&n.reset(m(u({},l),{docstatus:l.docstatus}))})}),[D,j]=y.useState(!1),W=()=>{j(!1)},w=()=>{t("Raven Webhook",s.name,{enabled:!s.enabled}).then(()=>{C.success(`Webhook ${s.enabled?"disabled":"enabled"}`),b(),o()})};y.useEffect(()=>{const d=l=>{l.key==="s"&&(l.metaKey||l.ctrlKey)&&(l.preventDefault(),n.handleSubmit(i)())};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[]);const L=s!=null&&s.enabled?[{label:"Enabled",color:"green"}]:[{label:"Disabled",color:"gray"}];return e.jsx("form",{onSubmit:n.handleSubmit(i),children:e.jsx(A,m(u({},n),{children:e.jsxs(ne,{children:[e.jsx(oe,{title:s.name,headerBadges:r?[{label:"Not Saved",color:"red"}]:L,actions:e.jsxs(B,{children:[e.jsxs(I,{children:[e.jsx(T,{children:e.jsx(H,{"aria-label":"Options",variant:"surface",color:"gray",children:e.jsx(K,{})})}),e.jsx(U,{className:"min-w-32",children:e.jsx(_,{color:"gray",onClick:()=>j(!0),children:s.enabled?"Disable":"Enable"})})]}),e.jsxs(x,{type:"submit",disabled:a,children:[a&&e.jsx(v,{}),a?"Saving":"Save"]})]}),breadcrumbs:[{label:"Webhooks",href:"../"},{label:s.name,href:"",copyToClipboard:!0}]}),e.jsx(p,{error:h}),e.jsx(ee,{isEdit:!0}),e.jsx(q,{open:D,onOpenChange:j,children:e.jsxs(z,{className:G,children:[e.jsx(Q,{children:e.jsxs(E,{children:[s.enabled?"Disable":"Enable"," Webhook"]})}),e.jsxs(S,{direction:"column",gap:"2",children:[e.jsx(p,{error:h}),e.jsxs(E,{size:"2",children:["Are you sure you want to ",s.enabled?"disable":"enable"," this webhook?"]})]}),e.jsxs(S,{gap:"3",mt:"4",justify:"end",children:[e.jsx(Y,{children:e.jsx(x,{variant:"soft",color:"gray",onClick:W,children:"Cancel"})}),e.jsx(Z,{children:e.jsxs(x,{variant:"solid",color:s.enabled?"red":void 0,onClick:w,disabled:a,children:[a&&e.jsx(v,{}),a?"Updating":s.enabled?"Disable":"Enable"]})})]})]})})]})}))})},le=()=>{const{ID:s}=J(),{data:o,error:n,isLoading:t,mutate:a}=M("Raven Webhook",s,void 0,{shouldRetryOnError:!1});return e.jsxs(ae,{children:[t&&e.jsx(X,{className:"h-64"}),n&&e.jsx(p,{error:n}),o&&e.jsx(re,{data:o,mutate:a})]})},he=le;export{he as Component};
