var L=Object.defineProperty,f=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var p=(s,i,e)=>i in s?L(s,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[i]=e,g=(s,i)=>{for(var e in i||(i={}))S.call(i,e)&&p(s,e,i[e]);if(x)for(var e of x(i))k.call(i,e)&&p(s,e,i[e]);return s},h=(s,i)=>f(s,b(i));var j=(s,i,e)=>new Promise((o,t)=>{var m=n=>{try{l(e.next(n))}catch(r){t(r)}},d=n=>{try{l(e.throw(n))}catch(r){t(r)}},l=n=>n.done?o(n.value):Promise.resolve(n.value).then(m,d);l((e=e.apply(s,i)).next())});import{u as C,r as y,c as q,j as a,E as w,p as v,a as c,L as A,b as B,d as F,o as P,e as R,f as _,g as z}from"./index-81db420b.js";import{S as I}from"./SuccessCallout-9d06a4f7.js";import{i as N}from"./validations-18aa1769.js";import{A as T}from"./AuthContainer-6f4c35bc.js";const V=()=>{var r;const{register:s,handleSubmit:i,formState:{errors:e,isSubmitting:o}}=C(),[t,m]=y.useState(null),{call:d,error:l}=q("frappe.www.login.send_login_link");function n(u){return j(this,null,function*(){return d({email:u.email}).then(E=>{m({state:!0,message:"Login Link sent on Email"})}).catch(E=>{m(null)})})}return a.jsxs(T,{children:[l&&a.jsx(w,{error:l}),t&&a.jsx(I,{message:t.message}),a.jsx(v,{children:a.jsx("form",{onSubmit:i(n),children:a.jsxs(c,{direction:"column",gap:"4",children:[a.jsxs(c,{direction:"column",gap:"2",children:[a.jsx(A,{htmlFor:"email",isRequired:!0,children:"Email"}),a.jsx(B,h(g({},s("email",{validate:u=>N(u)||"Please enter a valid email address.",required:"Email is required."})),{name:"email",type:"email",placeholder:"jane@example.com",tabIndex:0})),(e==null?void 0:e.email)&&a.jsx(F,{children:(r=e==null?void 0:e.email)==null?void 0:r.message})]}),a.jsx(c,{direction:"column",gap:"2",children:a.jsx(P,{type:"submit",disabled:o,children:o?a.jsx(R,{}):"Send Login Link"})}),a.jsx(c,{direction:"column",gap:"1",align:"center",children:a.jsx(_,{size:"2",asChild:!0,children:a.jsx(z,{to:"/login",children:"Back to Login"})})})]})})})]})};V.displayName="LoginWithEmailPage";export{V as Component};
